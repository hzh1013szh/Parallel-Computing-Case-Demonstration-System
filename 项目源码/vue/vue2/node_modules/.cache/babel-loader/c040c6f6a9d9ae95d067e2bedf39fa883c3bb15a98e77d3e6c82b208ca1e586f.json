{"ast":null,"code":"import request from \"@/utils/request\";\nexport default {\n  name: 'UserView',\n  data() {\n    return {\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      userdata: {},\n      imgUrl: require('@/assets/img3.png'),\n      Myfans: [],\n      admin: {\n        id: '',\n        avatar: '',\n        myfan: '',\n        myfollow: ''\n      },\n      dialogFormVisible: false,\n      form: {\n        username: '',\n        name: '',\n        phone: '',\n        email: '',\n        specialty: '',\n        avatar: String\n      },\n      Followform: {\n        userid: '',\n        followid: ''\n      }\n    };\n  },\n  created() {\n    this.load();\n  },\n  mounted() {\n    this.load();\n  },\n  methods: {\n    load() {\n      request.get(`/admin/search/${this.$route.params.id}`).then(res => {\n        if (res.code === \"0\") {\n          this.admin = res.data;\n          this.getMyfans();\n          this.getUserData();\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      });\n    },\n    getMyfans() {\n      request.get(`/follow/myfan/${this.admin.id}`).then(res => {\n        if (res.code === \"0\") {\n          this.Myfans = res.data;\n          console.log(this.Myfans);\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      });\n    },\n    getUserData() {\n      request.get(`/admin/${this.user.id}`).then(res => {\n        if (res.code === \"0\") {\n          this.userdata = res.data;\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      });\n    },\n    follow() {\n      this.Followform.userid = this.user.id;\n      this.Followform.followid = this.admin.id;\n      request.post(\"/follow\", this.Followform).then(res => {\n        if (res.code === \"0\") {\n          this.$message({\n            type: 'success',\n            message: '关注成功'\n          });\n          this.getMyfans();\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      });\n    },\n    cancel() {\n      this.dialogFormVisible = false;\n    },\n    edit(currow) {\n      this.dialogFormVisible = true;\n      this.form = currow;\n    },\n    submit() {\n      // 管理员用户新增用户，初始化密码为1234\n      request.post(\"/admin\", this.form).then(res => {\n        if (res.code === \"0\") {\n          this.$message({\n            type: 'success',\n            message: '操作成功'\n          });\n          this.dialogFormVisible = false;\n          this.load();\n        } else {\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      });\n    },\n    Tomyfan() {},\n    Tomyfollow() {},\n    HandlerSuccess(res) {\n      this.form.avatar = res.data;\n    }\n  }\n};","map":{"version":3,"names":["request","name","data","user","localStorage","getItem","JSON","parse","userdata","imgUrl","require","Myfans","admin","id","avatar","myfan","myfollow","dialogFormVisible","form","username","phone","email","specialty","String","Followform","userid","followid","created","load","mounted","methods","get","$route","params","then","res","code","getMyfans","getUserData","$message","type","message","msg","console","log","follow","post","cancel","edit","currow","submit","Tomyfan","Tomyfollow","HandlerSuccess"],"sources":["src/views/person/UserView.vue"],"sourcesContent":["<template>\n <div>\n   <div>\n     <el-alert\n         title=\"该用户已被封禁\"\n         type=\"error\"\n         effect=\"dark\"\n         v-if=\"admin.status === '-1'\">\n     </el-alert>\n   </div>\n   <div>\n     <el-alert\n         title=\"该用户还未通过管理员审核\"\n         type=\"warning\"\n         effect=\"dark\"\n         v-if=\"admin.status === '0'\">\n     </el-alert>\n   </div>\n    <el-card class=\"box-car\">\n      <div class=\"PersonTop\">\n          <div class=\"PersonTop_img\">\n            <el-image style=\"width: 240px; height: 120px\" :src=\"'http://localhost:8080/api/files/' + admin.avatar\" :fit=\"'fill'\"></el-image>\n          </div>\n          <div class=\"PersonTop_text\">\n            <div class=\"user_text\">\n              <div class=\"user_name\">\n                <span> {{ admin.username}} </span>\n              </div>\n                <div class=\"user_qianming\">\n                <span> 个人特长：{{ admin.specialty }}</span>\n              </div>\n              <div class=\"user_anniu\">\n                <el-button\n                  class=\"el-icon-edit\"\n                  v-show=\"Number(this.$route.params.id) === this.user.id\"\n                  type=\"primary\"\n                  size=\"medium\"\n                  plain\n                  @click=\"edit(admin)\"\n                  >编辑</el-button>\n                  <el-button\n                    v-show=\"Number(this.$route.params.id) !== this.user.id\"\n                    @click=\"follow()\"\n                    type=\"primary\"\n                    size=\"medium\"\n                    icon=\"el-icon-check\"\n                    v-text=\"\n                      Myfans.indexOf(this.user.id) > -1\n                        ? '已关注'\n                        : '关注'\n                    \"></el-button>\n              </div>\n            </div>\n          </div>\n          <div class=\"user_num\">\n            <div style=\"cursor: pointer\" @click=\"Tomyfan()\">\n              <div class=\"num_number\">{{ admin.myfan }}</div>\n              <span class=\"num_text\">粉丝</span>\n            </div>\n            <div style=\"cursor: pointer\" @click=\"Tomyfollow()\">\n              <div class=\"num_number\">{{ admin.myfollow }}</div>\n              <span class=\"num_text\">关注</span>\n            </div>\n          </div>\n      </div>\n    </el-card>\n     <div class=\"person_body\">\n        <div class=\"person_body_left\">\n          <el-card class=\"box-card\" :body-style=\"{ padding: '0px' }\">\n            <div slot=\"header\" class=\"clearfix\">\n              <span class=\"person_body_list\" style=\"border-bottom: none\"\n                >个人中心</span\n              >\n            </div>\n            <el-menu\n              router\n              active-text-color=\"#00c3ff\"\n              class=\"el-menu-vertical-demo\">\n              <el-menu-item\n                index=\"info\"\n                :route=\"{ name: 'info', params: $route.params.id }\"\n              >\n                <i class=\"el-icon-user\"></i>\n                <span slot=\"title\">个人简介</span>\n              </el-menu-item>\n              <el-menu-item\n                index=\"post\"\n                :route=\"{ name: 'post', params: $route.params.id }\"\n              >\n                <i class=\"el-icon-edit-outline\"></i>\n                <span slot=\"title\">发帖</span>\n              </el-menu-item>\n              <el-menu-item\n                index=\"mycollect\"\n                :route=\"{ name: 'mycollect', params: $route.params.id }\"\n              >\n                <i class=\"el-icon-document\"></i>\n                <span slot=\"title\">收藏</span>\n              </el-menu-item>\n              <el-menu-item\n                index=\"myfan\"\n                :route=\"{ name: 'myfan', params: $route.params.id }\"\n              >\n                <i class=\"el-icon-tableware\"></i>\n                <span slot=\"title\">粉丝</span>\n              </el-menu-item>\n              <el-menu-item\n                index=\"myfollow\"\n                :route=\"{ name: 'myfollow', params: $route.params.id }\"\n              >\n                <i class=\"el-icon-circle-plus-outline\"></i>\n                <span slot=\"title\">关注</span>\n              </el-menu-item>\n            </el-menu>\n          </el-card>\n        </div>\n       <div class=\"person_body_right\">\n        <router-view></router-view>\n      </div>\n     </div>\n     <div>\n      <el-dialog title=\"请输入信息\" :visible.sync=\"dialogFormVisible\" width=\"30%\">\n        <el-form :model=\"form\">\n          <el-form-item label=\"头像\" label-width=\"15%\">\n            <el-upload action=\"http://localhost:8080/api/files/upload\" :on-success=\"HandlerSuccess\">\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n            </el-upload>\n          </el-form-item>\n        </el-form>\n        <el-form :model=\"form\">\n          <el-form-item label=\"用户名\" label-width=\"15%\">\n            <el-input v-model=\"form.username\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-form :model=\"form\">\n          <el-form-item label=\"密码\" label-width=\"15%\">\n            <el-input v-model=\"form.password\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-form :model=\"form\">\n          <el-form-item label=\"姓名\" label-width=\"15%\">\n            <el-input v-model=\"form.name\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-form :model=\"form\">\n          <el-form-item label=\"电话\" label-width=\"15%\">\n            <el-input v-model=\"form.phone\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n        </el-form>\n        <el-form :model=\"form\">\n          <el-form-item label=\"邮箱\" label-width=\"15%\">\n            <el-input v-model=\"form.email\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"特长\" label-width=\"15%\">\n            <el-input v-model=\"form.specialty\" placeholder=\"用关键字描述\" autocomplete=\"off\" style=\"width: 80%\" ></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"cancel()\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"submit()\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: 'UserView',\n  data(){\n    return{\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      userdata:{\n\n      },\n      imgUrl: require('@/assets/img3.png'),\n      Myfans: [],\n      admin:{\n        id:'',\n        avatar: '',\n        myfan:'',\n        myfollow:'',\n      },\n      dialogFormVisible : false,\n      form:{\n        username: '',\n        name: '',\n        phone: '',\n        email: '',\n        specialty: '',\n        avatar: String,\n      },\n      Followform:{\n        userid:'',\n        followid:'',\n      }\n    }\n  },\n  created() {\n    this.load();\n  },\n  mounted(){\n    this.load()\n  },\n  methods: {\n    load(){\n      request.get(`/admin/search/${this.$route.params.id}`).then(res => {\n        if(res.code === \"0\"){\n          this.admin = res.data;\n          this.getMyfans();\n          this.getUserData();\n        }else{\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      })\n    },\n    getMyfans(){\n      request.get(`/follow/myfan/${this.admin.id}`).then(res => {\n        if(res.code === \"0\"){\n          this.Myfans = res.data;\n          console.log(this.Myfans);\n        }else{\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      })\n    },\n    getUserData(){\n      request.get(`/admin/${this.user.id}`).then(res => {\n        if(res.code === \"0\"){\n          this.userdata = res.data;\n        }else{\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      })\n    },\n    follow(){\n      this.Followform.userid = this.user.id;\n      this.Followform.followid = this.admin.id;\n      request.post(\"/follow\",this.Followform).then(res => {\n        if(res.code === \"0\"){\n          this.$message({\n            type: 'success',\n            message: '关注成功'\n          });\n          this.getMyfans();\n        }else{\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      })\n    },\n    cancel(){\n      this.dialogFormVisible = false;\n    },\n    edit(currow){\n      this.dialogFormVisible = true;\n      this.form = currow;\n    },\n    submit(){\n      // 管理员用户新增用户，初始化密码为1234\n      request.post(\"/admin\",this.form).then(res => {\n        if(res.code === \"0\") {\n          this.$message({\n            type: 'success',\n            message: '操作成功'\n          });\n          this.dialogFormVisible = false;\n          this.load();\n        }\n        else{\n          this.$message({\n            type: 'error',\n            message: res.msg\n          });\n        }\n      })\n    },\n    Tomyfan(){\n\n    },\n    Tomyfollow(){\n\n    },\n    HandlerSuccess(res){\n      this.form.avatar = res.data;\n    }\n  }\n\n}\n</script>\n\n<style>\n.me-video-player {\n  background-color: transparent;\n  width: 100%;\n  height: 100%;\n  object-fit: fill;\n  display: block;\n  position: fixed;\n  left: 0;\n  z-index: 0;\n  top: 0;\n}\n.PersonTop {\n  width: 1000px;\n  height: 140px;\n  background-color: white;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  border-radius: 5px;\n}\n.box-car{\n  width: 1000px;\n  height: 160px;\n  background-color: white;\n  margin-top: 30px;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  border-radius: 5px\n}\n.PersonTop_img {\n  width: 240px;\n  height: 120px;\n  background-color: #8c939d;\n  margin-right: 24px;\n  margin-left: 20px;\n  overflow: hidden;\n  border-radius: 20px;\n}\n\n.PersonTop_img img {\n  width: 100%;\n  height: 100%;\n  border-radius: 20px;\n}\n\n.PersonTop_text {\n  height: 120px;\n  width: 880px;\n  display: flex;\n}\n\n.user_text {\n  width: 60%;\n  height: 100%;\n  line-height: 30px;\n}\n\n.user_name {\n  font-weight: bold;\n}\n.user-v {\n  margin-bottom: -5px;\n}\n.user-v-img {\n  width: 15px;\n  height: 15px;\n}\n.user-v-font {\n  font-size: 15px;\n  color: #00c3ff;\n}\n.user_qianming {\n  font-size: 14px;\n  color: #999;\n}\n\n.user_num {\n  width: 40%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n}\n\n.user_num > div {\n  text-align: center;\n  border-right: 1px dotted #999;\n  box-sizing: border-box;\n  width: 80px;\n  height: 40px;\n  line-height: 20px;\n}\n\n.num_text {\n  color: #999;\n}\n\n.num_number {\n  font-size: 20px;\n  color: #333;\n}\n.el-menu-item>span {\n  font-size: 16px;\n  color: #999;\n}\n\n/*下面部分样式*/\n.person_body {\n  width: 1000px;\n  margin-top: 210px;\n  display: flex;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  border-radius: 5px;\n}\n\n.person_body_left {\n  width: 27%;\n  height: 600px;\n  border-radius: 5px;\n  margin-right: 3%;\n  text-align: center;\n}\n\n.person_body_right {\n  width: 70%;\n  /* height: 500px; */\n  border-radius: 5px;\n  background-color: white;\n}\n\n.box-card {\n  height: 500px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}